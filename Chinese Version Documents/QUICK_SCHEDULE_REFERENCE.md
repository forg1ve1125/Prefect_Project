# ğŸ“… å®šæ—¶ä»»åŠ¡å¿«é€Ÿå‚è€ƒ

## ğŸ¯ ä½ çš„å®šæ—¶ä»»åŠ¡é…ç½®

### æ‰§è¡Œè®¡åˆ’

| # | Flow | æ—¶é—´ | Cron è¡¨è¾¾å¼ |
|---|------|------|-----------|
| 1ï¸âƒ£ | currency-acquisition | 09:00 | `0 9 15,25,28,29,30,31 * *` |
| 2ï¸âƒ£ | prepare-batch | 09:30 | `30 9 15,25,28,29,30,31 * *` |
| 3ï¸âƒ£ | process-batch | 10:00 | `0 10 15,25,28,29,30,31 * *` |

**è§¦å‘æ—¥æœŸ**: æ¯æœˆ **15ã€25ã€28ã€29ã€30ã€31** å·

**æ—¶åŒº**: Asia/Shanghaiï¼ˆæ ¹æ®éœ€è¦è°ƒæ•´ï¼‰

---

## ğŸš€ å¿«é€Ÿè®¾ç½®æ­¥éª¤

### 1ï¸âƒ£ æ‰“å¼€ Prefect Cloud
```
https://app.prefect.cloud
```

### 2ï¸âƒ£ ä¸ºæ¯ä¸ª Flow æ·»åŠ  Schedule

å¯¹äº **currency_acquisition_flow**:
```
Cron: 0 9 15,25,28,29,30,31 * *
Timezone: Asia/Shanghai
Description: æ¯æœˆè·å–æ±‡ç‡æ•°æ®
```

å¯¹äº **prepare_batch_flow**:
```
Cron: 30 9 15,25,28,29,30,31 * *
Timezone: Asia/Shanghai
Description: æ¯æœˆå‡†å¤‡æ‰¹å¤„ç†
```

å¯¹äº **process_batch_flow**:
```
Cron: 0 10 15,25,28,29,30,31 * *
Timezone: Asia/Shanghai
Description: æ¯æœˆå¤„ç†æ‰¹æ•°æ®
```

### 3ï¸âƒ£ å¯ç”¨å¹¶ä¿å­˜

- âœ… å‹¾é€‰å¯ç”¨ï¼ˆEnableï¼‰
- ğŸ’¾ ç‚¹å‡»ä¿å­˜ï¼ˆSaveï¼‰

---

## ğŸ“ Cron é€ŸæŸ¥è¡¨

ä½ çš„ Cron ç»„æˆéƒ¨åˆ†ï¼š

```
0          = åˆ†é’Ÿï¼ˆ:00ï¼‰
9          = å°æ—¶ï¼ˆ09:00ï¼‰
15,25,28,29,30,31 = æ—¥æœŸï¼ˆ15ã€25ã€28-31 å·ï¼‰
*          = æœˆä»½ï¼ˆæ¯ä¸ªæœˆï¼‰
*          = å‘¨å‡ ï¼ˆæ¯å¤©ï¼‰
```

---

## ğŸ§ª æµ‹è¯•

### æœ¬åœ°éªŒè¯ï¼ˆæ¨èå…ˆåšï¼‰
```bash
# åœ¨æœ¬åœ°è¿è¡ŒéªŒè¯é€»è¾‘
python -m flows.currency_acquisition_flow
python -m flows.prepare_batch_flow
python -m flows.process_batch_flow
```

### Cloud ä¸­æµ‹è¯•
1. ç™»å½• Prefect Cloud
2. æ‰¾åˆ°ç›¸åº” Flow
3. ç‚¹å‡» "Run" æ‰‹åŠ¨è§¦å‘
4. æ£€æŸ¥æ—¥å¿—

---

## âœ… è®¾ç½®å®Œæˆæ¸…å•

- [ ] ç™»å½• Prefect Cloud (https://app.prefect.cloud)
- [ ] ä¸º currency-acquisition æ·»åŠ  Schedule
- [ ] ä¸º prepare-batch æ·»åŠ  Schedule  
- [ ] ä¸º process-batch æ·»åŠ  Schedule
- [ ] éªŒè¯æ‰€æœ‰ Schedule å·²å¯ç”¨
- [ ] æ‰‹åŠ¨æµ‹è¯•è‡³å°‘ä¸€ä¸ª Flow
- [ ] ç¡®è®¤æ—¶åŒºè®¾ç½®æ­£ç¡®
- [ ] æŸ¥çœ‹ä¸‹ä¸€ä¸ªé¢„è®¡è¿è¡Œæ—¶é—´

---

## ğŸ“Œ é‡è¦æé†’

âš ï¸ **ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ª Worker åœ¨è¿è¡Œ**
```bash
# å¦‚æœéœ€è¦åœ¨æœ¬åœ°è¿è¡Œ
prefect worker start
```

âš ï¸ **æ£€æŸ¥æ—¶åŒº** - ç¡®ä¿é€‰æ‹©äº†æ­£ç¡®çš„æ—¶åŒºï¼ˆAsia/Shanghai æˆ–ä½ çš„æœ¬åœ°æ—¶åŒºï¼‰

âš ï¸ **æœˆæœ«æ—¥æœŸ** - æŸäº›æœˆä»½æ²¡æœ‰ 29ã€30ã€31 å·ï¼ŒCron ä¼šè‡ªåŠ¨è·³è¿‡

---

## ğŸ“Š é¢„æœŸçš„æ‰§è¡Œæµç¨‹

æ¯ä¸ªè§¦å‘æ—¥æœŸï¼ˆ15ã€25ã€28-31 å·ï¼‰ï¼š

```
09:00:00 â†’ currency-acquisition å¼€å§‹
          (è·å–æ±‡ç‡æ•°æ®ï¼Œ~30-60ç§’)
09:30:00 â†’ prepare-batch å¼€å§‹
          (å‡†å¤‡æ•°æ®ï¼Œ~10ç§’)
10:00:00 â†’ process-batch å¼€å§‹
          (å¤„ç†æ•°æ®ï¼Œ~10ç§’)
10:15:00 â†’ âœ… æ‰€æœ‰ä»»åŠ¡å®Œæˆ
```

---

## ğŸ”— ç›¸å…³èµ„æº

- [å®Œæ•´è®¾ç½®æŒ‡å—](./SCHEDULE_SETUP_GUIDE.md)
- [Prefect Cloud UI](https://app.prefect.cloud)
- [Cron è¯­æ³•å‚è€ƒ](https://en.wikipedia.org/wiki/Cron#Overview)
- [æ—¶åŒºåˆ—è¡¨](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)

---

## ğŸ’¡ éœ€è¦å¸®åŠ©ï¼Ÿ

æŸ¥çœ‹å¯¹åº”çš„æ–‡æ¡£ï¼š
1. **è®¾ç½®é—®é¢˜ï¼Ÿ** â†’ çœ‹ `SCHEDULE_SETUP_GUIDE.md`
2. **Cron è¡¨è¾¾å¼ç–‘é—®ï¼Ÿ** â†’ çœ‹æœ¬æ–‡çš„"Cron é€ŸæŸ¥è¡¨"
3. **Flow æ‰§è¡Œé—®é¢˜ï¼Ÿ** â†’ æ£€æŸ¥ Prefect Cloud çš„æ—¥å¿—

---

**ç¥ä½ é…ç½®é¡ºåˆ©ï¼** ğŸš€
