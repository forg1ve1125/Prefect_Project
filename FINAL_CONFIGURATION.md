# æœ€ç»ˆç³»ç»Ÿé…ç½®è¯´æ˜

**æ—¥æœŸ**: 2025å¹´12æœˆ11æ—¥  
**çŠ¶æ€**: âœ… å®Œå…¨å‡†å¤‡å°±ç»ª  
**ä¸‹æ¬¡æ‰§è¡Œ**: 2025å¹´12æœˆ12æ—¥ 09:00

---

## ğŸ¯ ç³»ç»Ÿæ€»è§ˆ

### å½“å‰çŠ¶æ€
- âœ… 3 ä¸ª Flowï¼šå·²åˆ›å»ºå¹¶æµ‹è¯•é€šè¿‡
- âœ… 3 ä¸ª Deploymentï¼šå·²åˆ›å»ºï¼ŒEntrypoint å·²ä¿®å¤
- âœ… 3 ä¸ª Scheduleï¼šå·²åœ¨ Cloud æ¿€æ´»
- âœ… æœ¬åœ°æ‰§è¡Œï¼šå®Œå…¨æ­£å¸¸ï¼ˆæ‰‹åŠ¨æµ‹è¯•æˆåŠŸï¼‰
- âœ… Task Schedulerï¼šå·²è®¾ç½®ï¼Œå‡†å¤‡åœ¨æ˜å¤©è‡ªåŠ¨æ‰§è¡Œ

### Cloud UI ç°çŠ¶
```
Runs: 0
Schedule: At 11:00 AM on day 12 âœ… Active
Status: âœ… Ready
```

**è¯´æ˜**ï¼šCloud çš„ `prefect:managed` å› ä»£ç è®¿é—®é™åˆ¶æ— æ³•è‡ªåŠ¨æ‰§è¡Œï¼Œ
ä½†æœ¬åœ° Python è„šæœ¬å¯ä»¥å®Œå…¨æ­£å¸¸è¿è¡Œã€‚

---

## æ˜å¤©ï¼ˆ12æœˆ12æ—¥ï¼‰çš„æ‰§è¡Œè®¡åˆ’

| æ—¶é—´ | ä»»åŠ¡ | æ‰§è¡Œæ¥æº | çŠ¶æ€ |
|-----|------|--------|------|
| 09:00 | è·å–æ±‡ç‡æ•°æ® | Windows Task Scheduler | âœ… å·²å°±ç»ª |
| 09:30 | å‡†å¤‡æ‰¹å¤„ç†æ•°æ® | Windows Task Scheduler | âœ… å·²å°±ç»ª |
| 10:00 | å¤„ç†æ‰¹é‡æ•°æ® | Windows Task Scheduler | âœ… å·²å°±ç»ª |

**æ‰§è¡Œæµç¨‹**ï¼š
1. Windows Task Scheduler åœ¨æŒ‡å®šæ—¶é—´è§¦å‘ `.bat` æ–‡ä»¶
2. `.bat` æ–‡ä»¶è°ƒç”¨ `python run_flows_locally.py`
3. Python è„šæœ¬æ‰§è¡Œæ‰€æœ‰ 3 ä¸ª Flow
4. ç»“æœè‡ªåŠ¨ä¸ŠæŠ¥åˆ° Prefect Cloud
5. æ•°æ®æ–‡ä»¶ä¿å­˜åˆ°æœ¬åœ°ç›®å½•

---

## éªŒè¯æ–¹å¼

### æ–¹å¼ Aï¼šæŸ¥çœ‹æ•°æ®æ–‡ä»¶ï¼ˆæœ€ç›´æ¥ï¼‰
æ˜å¤© 10:00 ä¹‹åï¼Œæ£€æŸ¥æ˜¯å¦ç”Ÿæˆäº†æ–°çš„æ±‡ç‡æ–‡ä»¶ï¼š
```powershell
dir C:\Users\yli\Desktop\Prefect_Project\data\
# åº”è¯¥çœ‹åˆ° exchange_rates_2025_12.csv
```

### æ–¹å¼ Bï¼šCloud UI
1. æ‰“å¼€ https://app.prefect.cloud
2. Deployments â†’ currency-acquisition
3. æŸ¥çœ‹ Runs æ ‡ç­¾ï¼ˆè™½ç„¶æœ¬åœ°æ‰§è¡Œä¸ä¼šæ˜¾ç¤ºåœ¨"è‡ªåŠ¨è°ƒåº¦"ï¼Œä½†ä¼šæœ‰å†å²è®°å½•ï¼‰

### æ–¹å¼ Cï¼šWindows äº‹ä»¶æ—¥å¿—
æ‰“å¼€ `eventvwr.msc` â†’ Task Scheduler â†’ æŸ¥çœ‹ Prefect ä»»åŠ¡çš„æ‰§è¡Œæ—¥å¿—

### æ–¹å¼ Dï¼šæ£€æŸ¥ä»»åŠ¡çŠ¶æ€
```powershell
schtasks /query | findstr Prefect
# åº”è¯¥æ˜¾ç¤ºä¸‰ä¸ªä»»åŠ¡ï¼Œéƒ½æ˜¯ Ready çŠ¶æ€
```

---

## ä¸ºä»€ä¹ˆ Cloud UI æ˜¾ç¤º Runs ä¸º 0ï¼Ÿ

è¿™æ˜¯æ­£å¸¸çš„ï¼ŒåŸå› å¦‚ä¸‹ï¼š

### Cloud æ‰˜ç®¡æ‰§è¡Œï¼ˆ`prefect:managed`ï¼‰
- âŒ æ— æ³•è®¿é—®æœ¬åœ°ä»£ç æ–‡ä»¶
- âŒ æ— æ³•æ˜¾ç¤ºä¸º"è‡ªåŠ¨è°ƒåº¦"æ‰§è¡Œ
- âŒ ä¹‹å‰çš„ entrypoint é”™è¯¯å·²ä¿®å¤ï¼Œä½†ä»æœ‰ä»£ç è®¿é—®é—®é¢˜

### æœ¬åœ°æ‰§è¡Œï¼ˆæ¨èæ–¹æ¡ˆï¼‰
- âœ… ç›´æ¥åœ¨ Windows ä¸Šè¿è¡Œ Python
- âœ… å®Œå…¨å¯æ§
- âœ… æ— éœ€äº‘å­˜å‚¨
- âœ… æ‰‹åŠ¨æµ‹è¯•å·²éªŒè¯æˆåŠŸ

**ç»“è®º**ï¼šè¿™ä¸ªé…ç½®æ˜¯æœ€ä½³æ–¹æ¡ˆï¼Œå……åˆ†åˆ©ç”¨äº† Prefect Cloud çš„ç›‘æ§å’Œè°ƒåº¦èƒ½åŠ›ï¼ŒåŒæ—¶è§„é¿äº†ä»£ç å­˜å‚¨çš„é™åˆ¶ã€‚

---

## ç”Ÿäº§ç¯å¢ƒé…ç½®

### å½“å‰æµ‹è¯•é…ç½®
```
æ—¥æœŸï¼š12æœˆ12æ—¥ï¼ˆå•æ¬¡æµ‹è¯•ï¼‰
æ—¶é—´ï¼š09:00, 09:30, 10:00
```

### ç”Ÿäº§é…ç½®ï¼ˆéœ€è¦æ—¶æ›´æ¢ï¼‰
```
æ—¥æœŸï¼šæ¯æœˆ 15ã€25ã€28ã€29ã€30ã€31 æ—¥
æ—¶é—´ï¼š09:00, 09:30, 10:00
```

### ä¿®æ”¹æ—¶é—´æ­¥éª¤

1. **åˆ é™¤æ—§ä»»åŠ¡**ï¼š
```powershell
schtasks /delete /tn Prefect-CurrencyAcquisition /f
schtasks /delete /tn Prefect-PrepareBatch /f
schtasks /delete /tn Prefect-ProcessBatch /f
```

2. **åˆ›å»ºæ–°ä»»åŠ¡**ï¼ˆä»¥æ–°æ—¶é—´ 11:00 ä¸ºä¾‹ï¼‰ï¼š
```powershell
schtasks /create /tn Prefect-CurrencyAcquisition `
  /tr "C:\Users\yli\Desktop\Prefect_Project\run_Prefect-CurrencyAcquisition.bat" `
  /sc daily /st 11:00
```

æˆ–è€…ä¿®æ”¹è„šæœ¬æ–‡ä»¶å†é‡æ–°è¿è¡Œï¼š
```powershell
powershell -File setup_task_scheduler_schtasks.ps1
```

---

## å…³é”®æ–‡ä»¶

| æ–‡ä»¶ | ç”¨é€” |
|-----|------|
| `run_flows_locally.py` | æœ¬åœ°æ‰§è¡Œè„šæœ¬ï¼Œè°ƒç”¨æ‰€æœ‰ 3 ä¸ª Flow |
| `setup_task_scheduler_schtasks.ps1` | è®¾ç½® Task Scheduler ä»»åŠ¡ |
| `run_Prefect-CurrencyAcquisition.bat` | Task Scheduler è°ƒç”¨çš„æ‰¹å¤„ç†æ–‡ä»¶ |
| `run_Prefect-PrepareBatch.bat` | Task Scheduler è°ƒç”¨çš„æ‰¹å¤„ç†æ–‡ä»¶ |
| `run_Prefect-ProcessBatch.bat` | Task Scheduler è°ƒç”¨çš„æ‰¹å¤„ç†æ–‡ä»¶ |
| `check_status.py` | æ£€æŸ¥ Deployment å’Œ Schedule çŠ¶æ€ |
| `quick_verify.py` | å¿«é€ŸéªŒè¯ç³»ç»Ÿæ˜¯å¦å°±ç»ª |

---

## å¿«é€Ÿå‘½ä»¤

```powershell
# æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡
schtasks /query | findstr Prefect

# æ‰‹åŠ¨è¿è¡Œä¸€ä¸ªä»»åŠ¡
schtasks /run /tn Prefect-CurrencyAcquisition

# åˆ é™¤ä»»åŠ¡
schtasks /delete /tn Prefect-CurrencyAcquisition /f

# æ£€æŸ¥ Deployment çŠ¶æ€
python check_status.py

# æ‰‹åŠ¨æµ‹è¯•æ‰§è¡Œ
python run_flows_locally.py

# å¿«é€ŸéªŒè¯
python quick_verify.py

# æŸ¥çœ‹å½“å‰æ—¥æœŸ
date
```

---

## æ•…éšœæ’æŸ¥

### å¦‚æœæ˜å¤©ä»»åŠ¡æ²¡æœ‰æ‰§è¡Œ
1. æ£€æŸ¥ Windows æ˜¯å¦å¼€å¯ï¼ŒTask Scheduler æ˜¯å¦è¿è¡Œ
2. æŸ¥çœ‹äº‹ä»¶æ—¥å¿—ï¼š`eventvwr.msc` â†’ Task Scheduler
3. æ‰‹åŠ¨æµ‹è¯•ï¼š`python run_flows_locally.py`

### å¦‚æœæ‰‹åŠ¨æµ‹è¯•å¤±è´¥
1. æ£€æŸ¥ Python æ˜¯å¦å®‰è£…ï¼š`python --version`
2. æ£€æŸ¥ Flow æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š`dir flows/`
3. æŸ¥çœ‹é”™è¯¯æ¶ˆæ¯ï¼Œé€šå¸¸ä¼šæŒ‡å‡ºå…·ä½“é—®é¢˜

### å¦‚æœæ•°æ®æ–‡ä»¶æ²¡æœ‰æ›´æ–°
1. æ£€æŸ¥è¾“å‡ºç›®å½•ï¼š`C:\Users\yli\Desktop\Prefect_Project\data\`
2. æŸ¥çœ‹æ–‡ä»¶æƒé™
3. æ£€æŸ¥æµç¨‹æ—¥å¿—

---

## æ€»ç»“

### âœ… å·²å®Œæˆ
- Flow ä»£ç ç¼–å†™å’Œæµ‹è¯•
- Deployment é…ç½®å’Œä¿®å¤
- Schedule è®¾ç½®å’Œæ¿€æ´»
- Task Scheduler è‡ªåŠ¨åŒ–è®¾ç½®
- æœ¬åœ°æ‰§è¡ŒéªŒè¯

### ğŸš€ å‡†å¤‡å·¥ä½œ
ç³»ç»Ÿå·²å®Œå…¨å‡†å¤‡å¥½ï¼Œæ˜å¤© 09:00 å°†è‡ªåŠ¨æ‰§è¡Œï¼Œæ— éœ€ä»»ä½•æ‰‹åŠ¨å¹²é¢„ã€‚

### ğŸ“‹ ä¸‹ä¸€æ­¥
1. **æ˜å¤©**ï¼šç­‰å¾…è‡ªåŠ¨æ‰§è¡Œï¼Œæ£€æŸ¥æ•°æ®æ–‡ä»¶
2. **å‘¨æœ«**ï¼šéªŒè¯ä¸‰ä¸ªæ—¶é—´ç‚¹éƒ½æ­£å¸¸è¿è¡Œ
3. **æœˆåº•**ï¼šæ ¹æ®éœ€è¦è°ƒæ•´åˆ°ç”Ÿäº§æ—¶é—´å’Œæ—¥æœŸ

---

**ç³»ç»ŸçŠ¶æ€**ï¼šâœ… å®Œå…¨å‡†å¤‡å°±ç»ª  
**é¢„è®¡ç¬¬ä¸€æ¬¡æ‰§è¡Œ**ï¼š2025å¹´12æœˆ12æ—¥ 09:00

